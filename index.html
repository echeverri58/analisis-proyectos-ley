<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>El Guardián Legislativo - Análisis de Proyectos de Ley</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&family=Merriweather:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">

    <!-- *** INICIO: SCRIPTS NECESARIOS PARA PROCESAMIENTO DE PDF (DEBEN CARGARSE ANTES QUE TU SCRIPT) *** -->
    <!-- pdfjsLib para leer el PDF de entrada -->
    <!-- Utiliza type="module" para las versiones .mjs -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.0.379/pdf.min.mjs" type="module"></script>
    <!-- pdfjsLib Worker - necesario para la extracción asíncrona -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.0.379/pdf.worker.min.mjs" type="module"></script>

    <!-- jsPDF para generar el PDF de salida -->
    <!-- Esta versión UMD (Universal Module Definition) debería estar disponible globalmente -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <!-- jspdf-autotable plugin para generar tablas elegantes -->
    <!-- Este plugin se adhiere al objeto jspdf global -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.8.2/jspdf.plugin.autotable.min.js"></script>
    <!-- *** FIN: SCRIPTS NECESARIOS *** -->

</head>
<body>
    <div class="container">
        <header>
            <h1><span class="highlight">El Guardián</span> Legislativo</h1>
            <p>Análisis Inteligente de Proyectos de Ley en Colombia</p>
        </header>

        <section class="intro-section card">
            <h2>¿Qué hace El Guardián Legislativo?</h2>
            <p>Este asistente basado en inteligencia artificial examina documentos normativos para identificar posibles **riesgos** o **"micos"** que puedan afectar el ordenamiento jurídico colombiano y los intereses ciudadanos.</p>
            <p>Se enfoca en detectar disposiciones contrarias a:</p>
            <ul>
                <li>Intereses públicos, derechos colectivos y humanos.</li>
                <li>Protección de recursos naturales y medio ambiente.</li>
                <li>Principios constitucionales y tratados internacionales.</li>
                <li>Claridad y precisión del lenguaje legal.</li>
            </ul>
            <p>Sube un archivo PDF de un proyecto de ley para empezar el análisis.</p>
        </section>

        <section class="upload-analyze-section card">
             <h2>Paso 1: Cargar y Analizar Documento</h2>
            <input type="file" id="pdfFile" accept=".pdf" style="display: none;">
            <button id="mainActionButton" class="action-button state-initial">
                 <span class="button-text">Cargar Proyecto de Ley (PDF)</span>
                 <span class="loading-spinner"></span>
            </button>
             <div id="fileNameContainer" class="file-name-container" style="display: none;">
                  Archivo seleccionado: <span id="fileNameDisplay"></span>
             </div>
        </section>

        <section id="status" class="status-section card" style="display: none;"></section>

        <section class="how-to-read-section card">
             <h2>Paso 2: Interpretar el Reporte PDF</h2>
             <p>Una vez completado el análisis, descarga el reporte PDF para ver los hallazgos. Está organizado así:</p>
             <ul>
                 <li>**Resumen General:** Propósito y contexto del documento.</li>
                 <li>**Tabla Resumen de Riesgos:** Artículos con problemas, tipo y severidad (Alto, Medio, Bajo).</li>
                 <li>**Análisis Detallado por Artículo:** Fragmento de texto, descripción del riesgo ("mico"), implicaciones, severidad, referencias legales clave y recomendaciones de enmienda.</li>
                 <li>**Conclusión:** Valoración final y sugerencias estratégicas.</li>
             </ul>
             <p>El formato Markdown facilita la lectura del análisis detallado.</p>
         </section>

        <section id="resultSection" class="result-section card" style="display: none;">
            <h2>Paso 3: Descargar Reporte</h2>
            <p>El análisis está completo. Descarga el reporte detallado en formato PDF:</p>
            <a id="downloadLink" href="#" download="analisis_guardian_legislativo.pdf" class="download-button">
                 Descargar Reporte PDF
            </a>
        </section>

        <footer>
            <p>Creado por John Alexander Echeverry Ocampo</p>
            <p>Nota: Esta es una herramienta de apoyo. El análisis legal definitivo debe ser realizado por profesionales del derecho.</p>

        </footer>
    </div>

    <!-- Tu script principal DEBE ir DESPUÉS de las librerías que utiliza -->
    <script src="script.js"></script>

</body>
</html>
